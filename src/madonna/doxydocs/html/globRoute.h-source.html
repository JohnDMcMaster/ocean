<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>globRoute.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.1.5 on Thu Sep 28 15:37:56 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>globRoute.h</h1><a href="globRoute.h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// Thought you'd get C, but you ended up looking at a -*- C++ -*- header file.</font>
00002 <font class="comment">//</font>
00003 <font class="comment">//  @(#)globRoute.h 1.6 08/20/96 </font>
00004 <font class="comment">// </font>
00005 
00006 <font class="preprocessor">#ifndef __GLOBROUTE_H
</font>00007 <font class="preprocessor"></font><font class="preprocessor">#define __GLOBROUTE_H
</font>00008 <font class="preprocessor"></font>
00009 <font class="preprocessor">#include &lt;sealib.h&gt;</font>
00010 <font class="preprocessor">#include &lt;sdfset.h&gt;</font>
00011 <font class="preprocessor">#include &lt;graph.h&gt;</font>
00012 <font class="preprocessor">#include &lt;graphSteiner.h&gt;</font>
00013 <font class="preprocessor">#include "<a class="code" href="genpart.h.html">genpart.h</a>"</font>
00014 <font class="preprocessor">#include "<a class="code" href="matrixGrid.h.html">matrixGrid.h</a>"</font>
00015 <font class="preprocessor">#include "<a class="code" href="image.h.html">image.h</a>"</font>
00016 <font class="keyword">class </font><a class="code" href="class_expansiongridterminal.html">expansionGridTerminal</a>;
00017 <font class="keyword">class </font><a class="code" href="class_expansiongridedge.html">expansionGridEdge</a>;
00018 <font class="keyword">class </font><a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a>;
00019 <font class="keyword">class </font><a class="code" href="class_globnet.html">globNet</a>;
00020 <font class="keyword">class </font><a class="code" href="class_globterm.html">globTerm</a>;
00021 <font class="keyword">class </font><a class="code" href="class_expansiongrid.html">expansionGrid</a>;
00022 
<a name="l00023"></a><a class="code" href="globRoute.h.html#a11">00023</a> <font class="keyword">typedef</font> <font class="keyword">enum</font> {Nowhere, South, East, North, West} pointOfCompass;
<a name="l00024"></a><a class="code" href="globRoute.h.html#a12">00024</a> <font class="keyword">typedef</font> <font class="keyword">enum</font> {HorizontalEdge, VerticalEdge} edgeDirection;
<a name="l00025"></a><a class="code" href="globRoute.h.html#a13">00025</a> <font class="keyword">typedef</font> <font class="keyword">enum</font> {PartitionGV,
00026           HorizontalChannelGV,
00027           VerticalChannelGV,
00028           ChannelCrossingGV}
00029 expansionGridVertexType;
00030 
00031 
<a name="l00032"></a><a class="code" href="class_expansiongridterminal.html">00032</a> <font class="keyword">class </font><a class="code" href="class_expansiongridterminal.html">expansionGridTerminal</a>: <font class="keyword">public</font> <a class="code" href="class_graphterminal.html">graphTerminal</a>
00033 {
00034 <font class="keyword">private</font>:
<a name="l00035"></a><a class="code" href="class_expansiongridterminal.html#o0">00035</a>    pointOfCompass _compass;
00036 <font class="keyword">public</font>:
<a name="l00037"></a><a class="code" href="class_expansiongridterminal.html#a0">00037</a>    <a class="code" href="class_expansiongridterminal.html#a0">expansionGridTerminal</a>(pointOfCompass cmpss)<font class="keyword"> </font>{_compass = cmpss;}
<a name="l00038"></a><a class="code" href="class_expansiongridterminal.html#a1">00038</a>    pointOfCompass <a class="code" href="class_expansiongridterminal.html#a1">compass</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _compass;}
00039 };
00040 
00041 
<a name="l00042"></a><a class="code" href="class_expansiongridedge.html">00042</a> <font class="keyword">class </font><a class="code" href="class_expansiongridedge.html">expansionGridEdge</a>: <font class="keyword">public</font> <a class="code" href="class_graphedge.html">graphEdge</a>
00043 {
00044 <font class="keyword">private</font>:
<a name="l00045"></a><a class="code" href="class_expansiongridedge.html#o1">00045</a>    <font class="keywordtype">int</font> _capacity, _occupation, _length;
<a name="l00046"></a><a class="code" href="class_expansiongridedge.html#o3">00046</a>    <font class="keywordtype">int</font> underCapacityPenalty, overCapacityReward;
<a name="l00047"></a><a class="code" href="class_expansiongridedge.html#o6">00047</a>    <font class="keywordtype">int</font> _x, _y;
<a name="l00048"></a><a class="code" href="class_expansiongridedge.html#o7">00048</a>    edgeDirection _direction;
00049 <font class="keyword">public</font>:
00050    <a class="code" href="class_expansiongridedge.html#a0">expansionGridEdge</a>(<font class="keywordtype">int</font> edgeLength, <font class="keywordtype">int</font> _x_, <font class="keywordtype">int</font> _y_, edgeDirection dir);
<a name="l00051"></a><a class="code" href="class_expansiongridedge.html#a1">00051</a>    <a class="code" href="class_expansiongridedge.html#a1">addToOccupation</a>(<font class="keywordtype">int</font> d)<font class="keyword"> </font>{<font class="keywordflow">return</font> _occupation += d;}
<a name="l00052"></a><a class="code" href="class_expansiongridedge.html#a2">00052</a>    <a class="code" href="class_expansiongridedge.html#a2">addToCapacity</a>(<font class="keywordtype">int</font> d)<font class="keyword">   </font>{<font class="keywordflow">return</font> _capacity += d;}
<a name="l00053"></a><a class="code" href="class_expansiongridedge.html#a3">00053</a>    <font class="keyword">const</font> edgeDirection <a class="code" href="class_expansiongridedge.html#a3">direction</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _direction;}
<a name="l00054"></a><a class="code" href="class_expansiongridedge.html#a4">00054</a>    <font class="keyword">const</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongridedge.html#a4">x</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _x;}
<a name="l00055"></a><a class="code" href="class_expansiongridedge.html#a5">00055</a>    <font class="keyword">const</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongridedge.html#a5">y</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _y;}
<a name="l00056"></a><a class="code" href="class_expansiongridedge.html#a6">00056</a>    <font class="keyword">const</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongridedge.html#a6">length</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _length;}
00057    <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongridedge.html#a7">eWeight</a>();
00058    <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_expansiongridedge.html#a8">print</a>();
00059 };
00060 
00061 
<a name="l00062"></a><a class="code" href="class_expansiongridvertex.html">00062</a> <font class="keyword">class </font><a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a>: <font class="keyword">public</font> <a class="code" href="class_graphvertex.html">graphVertex</a>
00063 {
00064 <font class="keyword">private</font>:
<a name="l00065"></a><a class="code" href="class_expansiongridvertex.html#o1">00065</a>    <font class="keywordtype">int</font> _x_coord, _y_coord;
<a name="l00066"></a><a class="code" href="class_expansiongridvertex.html#o2">00066</a>    expansionGridVertexType _type;
<a name="l00067"></a><a class="code" href="class_expansiongridvertex.html#o3">00067</a>    CIRCUITPTR _partition;
00068 <font class="keyword">public</font>:
00069    <a class="code" href="class_expansiongridvertex.html#a0">expansionGridVertex</a>(CIRCUITPTR partition, expansionGridVertexType t,
00070                <font class="keywordtype">int</font> x_coord, <font class="keywordtype">int</font> y_coord);
00071    <a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *<a class="code" href="class_expansiongridvertex.html#a1">neighbor</a>(pointOfCompass);
00072    <a class="code" href="class_expansiongridedge.html">expansionGridEdge</a>   *<a class="code" href="class_expansiongridvertex.html#a2">edge</a>(pointOfCompass);
<a name="l00073"></a><a class="code" href="class_expansiongridvertex.html#a3">00073</a>    <font class="keywordtype">int</font> <a class="code" href="class_expansiongridvertex.html#a3">xCoord</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _x_coord;}
<a name="l00074"></a><a class="code" href="class_expansiongridvertex.html#a4">00074</a>    <font class="keywordtype">int</font> <a class="code" href="class_expansiongridvertex.html#a4">yCoord</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _y_coord;}
<a name="l00075"></a><a class="code" href="class_expansiongridvertex.html#a5">00075</a>    expansionGridVertexType <a class="code" href="class_expansiongridvertex.html#a5">type</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _type;}
<a name="l00076"></a><a class="code" href="class_expansiongridvertex.html#a6">00076</a>    <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_expansiongridvertex.html#a6">print</a>()<font class="keyword"> </font>{cout &lt;&lt; form(<font class="stringliteral">"egVx(%d,%d) "</font>,_x_coord, _y_coord);}
00077 };
00078 
00079 
00080 
00081 <font class="comment">// A globNet ("global net") is a set of treeVertices that are visited</font>
00082 <font class="comment">// by a net.</font>
<a name="l00083"></a><a class="code" href="class_globnet.html">00083</a> <font class="keyword">class </font><a class="code" href="class_globnet.html">globNet</a>: <font class="keyword">public</font> <a class="code" href="class_sdfset.html">sdfset</a>, <font class="keyword">public</font> <a class="code" href="class_sdfsetelmt.html">sdfsetElmt</a>
00084 {
00085 <font class="keyword">private</font>:
<a name="l00086"></a><a class="code" href="class_globnet.html#o0">00086</a>    NETPTR _net;
<a name="l00087"></a><a class="code" href="class_globnet.html#o1">00087</a>    <font class="keywordtype">int</font>    _weight;
00088 <font class="keyword">public</font>:
<a name="l00089"></a><a class="code" href="class_globnet.html#a0">00089</a>    <a class="code" href="class_globnet.html#a0">globNet</a>(NETPTR n): sdfset(), sdfsetElmt(), <a class="code" href="class_globnet.html#m0">route</a>()<font class="keyword"> </font>{_net = n; _weight = 0;}
<a name="l00090"></a><a class="code" href="class_globnet.html#m0">00090</a>    <a class="code" href="class_sdfset.html">sdfset</a> route;            <font class="comment">// this contains the global route</font>
<a name="l00091"></a><a class="code" href="class_globnet.html#a1">00091</a>    <font class="keyword">const</font> NETPTR <a class="code" href="class_globnet.html#a1">net</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _net;}
<a name="l00092"></a><a class="code" href="class_globnet.html#a2">00092</a>    <font class="keywordtype">int</font> <a class="code" href="class_globnet.html#a2">weight</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> _weight;}
<a name="l00093"></a><a class="code" href="class_globnet.html#a3">00093</a>    <font class="keywordtype">int</font> <a class="code" href="class_globnet.html#a2">weight</a>(<font class="keyword">const</font> <font class="keywordtype">int</font> w)<font class="keyword"> </font>{<font class="keywordflow">return</font> _weight = w;}
<a name="l00094"></a><a class="code" href="class_globnet.html#a4">00094</a>    <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_globnet.html#a4">print</a>()<font class="keyword"> </font>{cout &lt;&lt; <font class="stringliteral">"&lt;globNet&gt;"</font>;}
00095    <font class="keywordtype">int</font> <a class="code" href="class_globnet.html#a5">isInRoute</a>(<a class="code" href="class_expansiongridedge.html">expansionGridEdge</a> *e); <font class="comment">// TRUE if e is in the global route</font>
00096    <font class="keywordtype">int</font> <a class="code" href="class_globnet.html#a6">isInNet</a>(<a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *v); <font class="comment">// TRUE if v is a required vertex</font>
00097    <font class="comment">// empty</font>
00098 };
00099 
00100 
00101 <font class="comment">// this is a terminal of a globNet, i.e. this is a pointer to a gridVertex:</font>
<a name="l00102"></a><a class="code" href="class_globterm.html">00102</a> <font class="keyword">class </font><a class="code" href="class_globterm.html">globTerm</a>: <font class="keyword">public</font> <a class="code" href="class_treevertex.html">treeVertex</a>
00103 {
00104 <font class="keyword">public</font>:
<a name="l00105"></a><a class="code" href="class_globterm.html#a0">00105</a>    <a class="code" href="class_globterm.html#a0">globTerm</a>(<a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *egv): treeVertex(egv)<font class="keyword"> </font>{;}
<a name="l00106"></a><a class="code" href="class_globterm.html#a1">00106</a>    <a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *<a class="code" href="class_globterm.html#a1">gridVx</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> (<a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *)vertex();}
00107 };
00108 
00109 
<a name="l00110"></a><a class="code" href="class_expansiongrid.html">00110</a> <font class="keyword">class </font><a class="code" href="class_expansiongrid.html">expansionGrid</a>
00111 {
00112 <font class="keyword">private</font>:
<a name="l00113"></a><a class="code" href="class_expansiongrid.html#o0">00113</a>    graphDescriptor thegraph;
<a name="l00114"></a><a class="code" href="class_expansiongrid.html#o1">00114</a>    <a class="code" href="class_sdfset.html">sdfset</a>          theglobnets;
<a name="l00115"></a><a class="code" href="class_expansiongrid.html#o2">00115</a>    <a class="code" href="class_matrixgrid.html">matrixGrid</a>      thematrix;
<a name="l00116"></a><a class="code" href="class_expansiongrid.html#o3">00116</a>    <a class="code" href="class__totalp.html">TOTALPPTR</a>       totalp;
00117    <font class="comment">// heavyWeight does not really represent a routing cost; it must be</font>
00118    <font class="comment">// sufficiently large so that it is never part of the minimal steiner tree,</font>
00119    <font class="comment">// except to connect a terminal to a PartitionGV:</font>
<a name="l00120"></a><a class="code" href="class_expansiongrid.html#o4">00120</a>    <font class="keywordtype">int</font>             heavyWeight;
00121    <font class="comment">// the lightWeights represent the cost/unit_length of a channel:</font>
<a name="l00122"></a><a class="code" href="class_expansiongrid.html#o6">00122</a>    <font class="keywordtype">int</font>             lightWeightHorizontal, lightWeightVertical;
<a name="l00123"></a><a class="code" href="class_expansiongrid.html#o7">00123</a>    <a class="code" href="class__imagedesc.html">IMAGEDESC</a> *image;    <font class="comment">// the image description</font>
00124    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c0">buildExpansionGrid</a>();
00125    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c1">buildExpansionGridVertices</a>();
00126    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c2">buildExpansionGridEdges</a>();
00127    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c3">makeEdge</a>(<font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, edgeDirection dir, <font class="keywordtype">int</font> weight);
00128    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c4">buildGlobNets</a>();
00129    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c5">makeRoutingInfo</a>(<a class="code" href="class__routing_info.html">ROUTING_INFO</a>&amp; rinfo, <font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y);
00130    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c6">sumRoutingInfo</a>(<font class="keywordtype">int</font> <font class="comment">/* HOR or VER */</font>,<font class="keywordtype">int</font> i, <a class="code" href="class__routing_channel.html">ROUTING_CHANNEL</a>&amp; channel_i);
00131    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c7">printRouteGlobNet</a>(<a class="code" href="class_globnet.html">globNet</a> *gnet);
00132    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c8">printRouteSummary</a>();
00133    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#c9">EGerror</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *msg);
00134 <font class="keyword">public</font>:
00135    <a class="code" href="class_expansiongrid.html#a0">expansionGrid</a>(<a class="code" href="class__totalp.html">TOTALPPTR</a> total);
<a name="l00136"></a><a class="code" href="class_expansiongrid.html#a1">00136</a>    <font class="keyword">const</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongrid.html#a1">nx</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> 2*totalp-&gt;nx - 1;} <font class="comment">// # of x-coords in the grid</font>
<a name="l00137"></a><a class="code" href="class_expansiongrid.html#a2">00137</a>    <font class="keyword">const</font> <font class="keywordtype">int</font> <a class="code" href="class_expansiongrid.html#a2">ny</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> 2*totalp-&gt;ny - 1;} <font class="comment">// # of y-coords in the grid`</font>
00138    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a3">instance2xy</a>(CIRINSTPTR cirinst, <font class="keywordtype">int</font>&amp; x, <font class="keywordtype">int</font>&amp; y);
00139    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a4">routeGlobNet</a>(<a class="code" href="class_globnet.html">globNet</a> *);    <font class="comment">// route one global net</font>
00140    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a5">routeGlobNets</a>();            <font class="comment">// route all global nets</font>
00141    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a6">summarizeGlobNets</a>();        <font class="comment">// compute totalp-&gt;routing</font>
00142    <font class="keywordtype">int</font> <a class="code" href="class_expansiongrid.html#a7">nwires</a>(pointOfCompass poc1, pointOfCompass poc2,
00143           <font class="keywordtype">int</font> x, <font class="keywordtype">int</font> y, <font class="keywordtype">int</font> *length =NIL); <font class="comment">// #wires through [x][y]</font>
00144    <a class="code" href="class_expansiongridedge.html">expansionGridEdge</a> *<a class="code" href="class_expansiongrid.html#a8">findEdge</a>(<a class="code" href="class_expansiongridvertex.html">expansionGridVertex</a> *, pointOfCompass);
00145    <font class="keywordtype">int</font> <a class="code" href="class_expansiongrid.html#a9">roundWiresToCells</a>(<font class="keywordtype">int</font> direction, <font class="keywordtype">int</font> n_wires);
00146    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a10">printRoute</a>(<a class="code" href="class_globnet.html">globNet</a> *, ostream&amp; =cout); <font class="comment">// print route of net in ASCII</font>
00147    <font class="keywordtype">void</font> <a class="code" href="class_expansiongrid.html#a11">printRouting</a>(ostream&amp; =cout); <font class="comment">// print the summary in totalp-&gt;routing</font>
00148 };
00149 
00150 
00151 <font class="preprocessor">#endif // __GLOBROUTE_H
</font></div></pre><hr><address><small>Generated at Thu Sep 28 15:37:56 2000 for madonna by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=110 height=53></a>1.1.5 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-2000</small></address>
</body>
</html>
